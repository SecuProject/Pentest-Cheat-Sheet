# FunctionHooking


## Compile library

``` 
gcc -ldl SHARE_LIB.c -fPIC -shared -o SHARE_LIB.so
``` 

| Argument | Description                                                                                                   |
| -------- | ------------------------------------------------------------------------------------------------------------- |
| `-ldl`     | Link against libdl aka the dynamic linking library.                                                           |
| `-fPIC`    | Generate position-independent code. (Excellent answer on why this is needed can be found here).               |
| `-shared ` | Tells the compiler to create a Shared Object which can be linked with other objects to produce an executable. |


## Pre-Loading Our Shared Object

### Using LD_PRELOAD:

```
export LD_PRELOAD=PATH/SHARE_LIB.so
```

### Using /etc/ld.so.preload (AS ROOT):

```sh
sudo sh -c "echo PATH/SHARE_LIB.so > /etc/ld.so.preload"
```

### Check library loaded

```
ldd BINARY
```

### List binary importation table 

```
objdump -T BINARY
```

# Documentation 

- https://man7.org/linux/man-pages/

# Source 
- https://tryhackme.com/room/linuxfunctionhooking
- 
